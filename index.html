<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- å…³é”®ï¼šé€‚é…å¾®ä¿¡ç§»åŠ¨ç«¯ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ–°å¹´çƒŸèŠ± | ç‚¹å‡»å±å¹•æ”¾çƒŸèŠ±ğŸ†</title>
    <style>
        /* é‡ç½®æ ·å¼ï¼Œé€‚é…å…¨å± */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            overflow: hidden;
            background: #000; /* é»‘è‰²èƒŒæ™¯å‡¸æ˜¾çƒŸèŠ± */
            touch-action: none; /* ç¦æ­¢ç§»åŠ¨ç«¯è§¦æ‘¸ç¼©æ”¾ï¼Œé¿å…å¹²æ‰° */
        }
        canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }
        /* æç¤ºæ–‡å­—ï¼ˆå¯é€‰ï¼‰ */
        .tip {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #fff;
            font-size: 16px;
            text-shadow: 0 0 5px #ff0;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="tip">ç‚¹å‡»å±å¹•ä»»æ„ä½ç½®æ”¾çƒŸèŠ±ğŸ†</div>
    <canvas id="fireworksCanvas"></canvas>

    <script>
        // è·å–Canvaså…ƒç´ å’Œä¸Šä¸‹æ–‡
        const canvas = document.getElementById('fireworksCanvas');
        const ctx = canvas.getContext('2d');

        // é€‚é…å±å¹•å¤§å°ï¼ˆæ”¯æŒæ—‹è½¬å±å¹•ï¼‰
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // éšæœºæ•°å·¥å…·å‡½æ•°
        function random(min, max) {
            return Math.random() * (max - min) + min;
        }

        // é¢œè‰²å·¥å…·å‡½æ•°ï¼ˆéšæœºçƒŸèŠ±é¢œè‰²ï¼‰
        function randomColor() {
            const colors = [
                '#ff0000', '#ff9900', '#ffff00', '#00ff00',
                '#0099ff', '#0033ff', '#9900ff', '#ff0099'
            ];
            return colors[Math.floor(random(0, colors.length))];
        }

        // ç²’å­ç±»ï¼ˆçƒŸèŠ±ç²’å­ï¼‰
        class Particle {
            constructor(x, y, color) {
                this.x = x; // åˆå§‹xåæ ‡
                this.y = y; // åˆå§‹yåæ ‡
                this.speed = random(1, 5); // ç²’å­é€Ÿåº¦
                this.angle = random(0, Math.PI * 2); // ç²’å­è¿åŠ¨è§’åº¦
                this.gravity = 0.05; // é‡åŠ›ï¼ˆè®©ç²’å­æœ‰ä¸‹å æ•ˆæœï¼‰
                this.vx = Math.cos(this.angle) * this.speed; // xæ–¹å‘é€Ÿåº¦
                this.vy = Math.sin(this.angle) * this.speed; // yæ–¹å‘é€Ÿåº¦
                this.alpha = 1; // é€æ˜åº¦ï¼ˆé€æ¸æ¶ˆå¤±ï¼‰
                this.decay = random(0.005, 0.01); // é€æ˜åº¦è¡°å‡é€Ÿåº¦
                this.color = color; // ç²’å­é¢œè‰²
            }

            // æ›´æ–°ç²’å­ä½ç½®å’ŒçŠ¶æ€
            update() {
                // åŠ å…¥é‡åŠ›ï¼Œè®©ç²’å­æ…¢æ…¢ä¸‹å 
                this.vy += this.gravity;
                this.x += this.vx;
                this.y += this.vy;
                // é€æ˜åº¦é€æ¸é™ä½
                this.alpha -= this.decay;
            }

            // ç»˜åˆ¶ç²’å­
            draw() {
                ctx.save();
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, 2, 0, Math.PI * 2); // ç²’å­å¤§å°ä¸º2px
                ctx.fillStyle = this.color;
                ctx.fill();
                ctx.restore();
            }
        }

        // å­˜å‚¨æ‰€æœ‰çƒŸèŠ±ç²’å­
        let particles = [];

        // åˆ›å»ºçƒŸèŠ±ï¼ˆç‚¹å‡»æ—¶è°ƒç”¨ï¼‰
        function createFirework(x, y) {
            const color = randomColor(); // éšæœºçƒŸèŠ±é¢œè‰²
            // ç”Ÿæˆ100-150ä¸ªç²’å­ï¼ˆè¶Šå¤šçƒŸèŠ±è¶Šå¯†ï¼‰
            const particleCount = random(100, 150);
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle(x, y, color));
            }
        }

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            // åŠé€æ˜é»‘è‰²èƒŒæ™¯ï¼Œè®©çƒŸèŠ±æœ‰æ‹–å½±æ•ˆæœ
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // æ›´æ–°å¹¶ç»˜åˆ¶æ‰€æœ‰ç²’å­
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.update();
                p.draw();

                // ç§»é™¤é€æ˜åº¦ä¸º0çš„ç²’å­ï¼Œä¼˜åŒ–æ€§èƒ½
                if (p.alpha <= 0) {
                    particles.splice(i, 1);
                }
            }

            requestAnimationFrame(animate);
        }

        // ç›‘å¬ç‚¹å‡»/è§¦æ‘¸äº‹ä»¶ï¼ˆé€‚é…PCå’Œæ‰‹æœºï¼‰
        // PCç«¯ç‚¹å‡»
        canvas.addEventListener('click', (e) => {
            createFirework(e.clientX, e.clientY);
        });
        // ç§»åŠ¨ç«¯è§¦æ‘¸
        canvas.addEventListener('touchstart', (e) => {
            // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆé¿å…å¾®ä¿¡è·³è½¬ï¼‰
            e.preventDefault();
            const touch = e.touches[0];
            createFirework(touch.clientX, touch.clientY);
        }, { passive: false });

        // å¯åŠ¨åŠ¨ç”»
        animate();
    </script>
</body>
</html>